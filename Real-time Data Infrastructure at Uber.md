[Real-time Data Infrastructure at Uber](https://dl.acm.org/doi/10.1145/3448016.3457552)

Uber is a company that offers a variety of services, some of which require decisions to be made in seconds.Moreover, Uber also wants to explore stream data for different roles with a huge volume of data. Therefore, Uber refined the Apache ecosystem to satisfy their requirements.

The structure of the data processing system at Uber is a modified version of Apache. This is a hierarchical system, which could be broadly divided into three layers: storage, streaming and computation, and analysis. Besides, there is a metadata component that provides an interface to manage the metadata for all layers.

There are two types of data that should be stored in this system: live streaming data and archival data from the whole system. The latter use [[HDFS]] to guarantee fault tolerance; meanwhile, the former use Kafka to provide streaming storage. Because PBs of data are uploaded to Uber every day, the processing system must be scalable.Therefore, Uber proposed cluster federation and a dead letter queue.

The scale and workloads impact not only storage but also streaming and computation. Flink is a high-performance engine in industry that has good back pressure handling ability compared with Strom and is less memory-consuming than [[Spark]]. Though Flink is a great choice, there are still some shortcomings that need to be overcome. Therefore, Uber improved its basic query function. Moreover, Uber also implemented two different technologies for storage and batch processing.

For a company, analysis is important. Therefore, Uber uses Apache Pinot, an online analytical processing system, for high-level query and analysis with low latency and TB-scale data support. Uber also modifies Pinot a lot to meet demand, specifically for fine-grained semantics and full SQL support. Moreover, Presto is also involved in this part to provide flexible and extensible in-memory queries.

Uber also made an all-in-one system that integrated a number of components. Generally, Uber uses components that belong to the Apache ecosystem. From this perspective, we can find that those components can easily embed into a system. For the storage layer, they may not have another choice except [[HDFS]], a distributed storage system suiting for the Uber's distributed computing infrastructures. In terms of streaming, Uber extends Kafka with new features such as pub-sub interfaces with at least once semantics. The computing layer also connects with storage and stream, but there are no components to discuss. Then we will talk about the components of analysis. There are two main parts in this layer. Pinot offers online analytical processing with high performance, which is deployed directly on the computing layer. Moreover, to maximize the convenience of this layer, some query features are also passed down from the full SQL support layer, Presto. As an interactive query layer, Presto can process data from both the computing layer and the online analytical processing layer, which gives users more flexibility and higher speed.

Almost all major companies except Google are adding new features and improving performance to Apache projects, and this behavior has led to very strong community support and an improving Apache ecosystem.