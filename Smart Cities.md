[Building a Big Data Platform for Smart Cities: Experience and Lessons from Santander](https://ieeexplore.ieee.org/abstract/document/7207275/)

As the development of industry, IoT also gets involved in our daily lives. However, how to process those data became the new question for analyzer. CiDAP is the platform to address this question.

The architecture of the smart city system can be divided into two parts: SmartSantander, the smart city testbed, and CiDAP, the live city data and analytics system. The latter one provides the ability to process data in different time types, such as historical data, near-term data, and real-time data. Moreover, this system can also process semi-structured and unstructured data.

Furthermore, the architecture of CiDAP is also worth discussing. Generally, CiDAP has a hierarchical structure; specifically, there are three layers in CiDAP. The first layer, data sources layer, is made up by millions of sensors and cameras, moreover, there are IoT-agent which could represent these sensors and response to the higher layer. Then, the second layer is the processing and storage layer; we will explain its details below. The top layer is the application layer, which contains deployed applications that build interfaces for the public or enable analyzers and scientists to explore the data.

Because the data sources upload semi-structured and unstructured data, the processing layer must be able to handle both of them. The unstructured data, like videos and audio files, is stored in NoSQL. The semi-structured JSON data is also stored as JSON files in the NoSQL database CouchDB. The reason they use CouchDB as their storage system is that CouchDB is able to work more closely with other components. For instance, CouchDB can generate and update MapReduce-based views and provides APIs to enable other components to read and write data directly. The processing of data, however, can be categorized as internal and external. The internal process happens in CouchDB, which can reduce the overhead of transmission. However, if the computing task is more complex, then external computing will be activated on the [[Spark]] cluster. Moreover, the data transmission between the application layer and the processing layer is implemented by REST APIs, which provide lots of useful features. For example, the push notification mechanism also allows applications to avoid sending multiple queries.

Comparing with the big data system in Uber, the data volume in CiDAP is much smaller. This might be the reason why they chose Spark instead of the many components in the Apache ecosystem. Moreover, the way of integration also is much simpler than Uber's. They use two layers of abstraction in order to simplify the data transfer procedure, and other components are just glued together by the bridge, external processing. As a result, this kind of system cannot handle too many parallel requests. As shown by the figure, the peak is about 32 requests per second for CouchDB, which is not a big number. Additionally, the throughput of simple queries peaks at around 128 requests per second. In short, the performance of this system is not good enough to meet the current demand, but although it is scalable, I still doubt if it will still have acceptable performance for more concurrent situations.

Therefore, this is a good direction for scientific research, there is also a certain amount of engineering applications, but not enough from the commercialization or large-scale implementation.